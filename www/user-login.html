<!doctype html>
<html lang="zh_CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">
	<title>用户登录</title>
	<!--jQuery框架-->
	<script src="./bower_components/jquery/dist/jquery.min.js" charset="UTF-8"></script>
	<!--amaze框架 需要jQuery支持-->
	<link href="./bower_components/amazeui/dist/css/amazeui.css" rel="stylesheet"/>
	<script src="./bower_components/amazeui/dist/js/amazeui.min.js" charset="UTF-8"></script>
	<!--avalon框架-->
	<script src="./bower_components/avalon/avalon.js"></script>
	<!--requirejs框架-->
	<script src="./bower_components/requirejs/require.js"></script>
	<!--fontawesome图标库-->
	<link rel="stylesheet" href="./bower_components/font-awesome/css/font-awesome.min.css"/>
	<!--js配置文件-->
	<script src="./config.js"></script>
	<script>

	</script>
	<style>
		.ms-controller, .ms-important, [ms-controller], [ms-important] {
			visibility: hidden;
		}

		body {
		/ / background-color: #DFDFDF;
		}

		.am-input-group {
			margin-top: .5em;
		}
	</style>
</head>
<body>
<!--头部-->
<style>
	header.am-header .am-header-title {
		margin: 0 3em;
	}

	.htyou-header-menu {
		color: #FFF;
	}
</style>
<header data-am-widget="header" class="am-header am-header-default am-header-fixed">
	<div class="am-header-left am-header-nav">
		<!--下拉菜单-->
		<i class="am-header-icon am-icon-chevron-left htyou-header-menu" onclick="doBack()"></i>
		<!--/下拉菜单-->
	</div>

	<h1 class="am-header-title">
		<a href="#title-link" class="">
			会员登陆
		</a>
	</h1>
	<!--右侧在线客服-->
	<div class="am-header-right am-header-nav">
		<a href="userregister.html">
			注册
		</a>
	</div>
	<!--/右侧在线客服-->
</header>
<!--/头部-->

<!--登陆表单-->
<div class="am-g">
	<div class="am-u-md-10 am-u-sm-centered">
		<form class="am-form">
			<div class="am-input-group">
				<span class="am-input-group-label"><i class="am-icon-user am-icon-fw"></i></span>
				<input type="text" id="username" class="am-form-field" placeholder="请输入您的帐号">
			</div>
			<div class="am-input-group">
				<span class="am-input-group-label"><i class="am-icon-lock am-icon-fw"></i></span>
				<input type="text" id="password" class="am-form-field" placeholder="请输入对应的密码">
			</div>
			<div class="am-input-group am-block">
				<a href="javascript:void(0);" class="am-btn am-btn-warning am-btn-block" id="login-button">登录</a>
			</div>
		</form>
		<div>
			<a href="#" class="am-block am-text-sm am-text-right">忘记密码</a>
		</div>
	</div>
</div>
<!--/登陆表单-->

<!--其它登陆方式-->
<style>
	.login-unit {
		padding: 2px;
	}

	#other-login {
		margin-top: 20%;
	}
</style>
<div class="am-g" id="other-login">
	您还可以使用下列方式登录
	<ul class="am-avg-sm-4 am-u-md-10 am-u-sm-centered">
		<li class="login-unit"><a href="#" class="am-btn am-btn-primary am-btn-block"><i class="fa fa-qq fa-lg"></i>&nbsp;QQ</a>
		</li>
		<li class="login-unit"><a href="#" class="am-btn am-btn-secondary am-btn-block"><i
				class="fa fa-wechat fa-lg"></i>&nbsp;微信</a></li>
		<li class="login-unit"><a href="#" class="am-btn am-btn-danger am-btn-block">支付宝</a></li>
		<li class="login-unit"><a href="#" class="am-btn am-btn-success am-btn-block"><i class="fa fa-weibo fa-lg"></i>&nbsp;微博</a>
		</li>
	</ul>
</div>
<!--/其它登陆方式-->

<!--底部LOGO-->
<style>
	#bottom-panel {
		position: fixed;
		left: 0;
		bottom: 0;
		width: 100%;
		text-align: center;
	}
</style>
<div id="bottom-panel">
	<img src="./images/htyou_logo.png" alt="华天旅游">
</div>

<script>
	$('document').ready(function () {
		//点击登录按钮的事件处理
		$('#login-button').click(function () {
			console.log('www.htyou.com/user/user_login.action?jsoncallback=?&code=' + $('#username').val() + '&userPassword=' + $('#password').val() + '&codeType=account&url=www.htyou.com&backurl=' + document.referrer);
			$.getJSON('/user/user_login.action?jsoncallback=?&code=' + $('#username').val() + '&userPassword=' + $('#password').val() + '&codeType=account&url=www.htyou.com&backurl=' + document.referrer, function (result) {
				//登录错误的处理
				if (typeof(result.guestVO) == 'undefined') {
					alert('登录失败！');
				} else {
					//登录成功的处理
					//console.log(result.guestVO);
					var guestInfo = result.guestVO;
					//保存用户数据串行化后放到localStorage中
					localStorage.setItem('HTGUESTINFO', JSON.stringify(guestInfo));
					//更新用户登录时间到localStorage中
					localStorage.setItem('HTLOGINTIME', (new Date()).getTime());
				}
			});
		});
	});
</script>
<!--/底部LOGO-->
</body>
</html>